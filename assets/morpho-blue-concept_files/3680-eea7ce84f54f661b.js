(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3680],{94371:function(e,r,t){"use strict";t.d(r,{L:function(){return s}});var n=t(93205),i=t(15277),s=function(e){var r=e.size,t=e.grow;return(0,i.tZ)(n.xu,{flexBasis:r,flexGrow:t?1:0,flexShrink:0})}},15531:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var n=t(59499),i=t(16835),s=t(12854),o=t(81472),c=t(69686),a=t(93205),u=t(67294);t(33583);var l=t(15277);function d(e){var r=e.children,t=e.isOpen,d=e.onClose,f=(0,c.dd)(),p=u.useState(f.open),b=(0,i.Z)(p,2),v=b[0],g=b[1];u.useEffect(function(){window.requestAnimationFrame(function(){g(f.open)})},[f.open]);var h=(0,o.useTransition)(t,{from:{x:0},enter:{x:1},leave:{x:0},config:{tension:250,friction:25}}),m=v?void 0:d;return(0,l.tZ)(s.fC,{open:t,onOpenChange:function(e){e||null==m||m()},children:h(function(e,t){return t?(0,l.tZ)(s.h_,{forceMount:!0,children:(0,l.tZ)(s.aV,{asChild:!0,children:(0,l.tZ)(a.xu,{as:o.animated.div,className:"t77f350",display:"flex",inset:"0px",paddingBottom:(0,n.Z)({},"sm","24px"),paddingTop:(0,n.Z)({xs:"80px"},"sm","24px"),paddingX:(0,n.Z)({},"sm","24px"),position:"fixed",style:{opacity:e.x.to({range:[0,1],output:[0,1]})},children:(0,l.tZ)(a.xu,{display:"flex",flexGrow:1,justifyContent:"center",marginBottom:(0,n.Z)({},"sm","auto"),marginTop:"auto",marginX:"auto",maxWidth:"full",position:"relative",children:(0,l.tZ)(s.VY,{asChild:!0,onOpenAutoFocus:function(e){e.preventDefault()},children:(0,l.tZ)(a.xu,{display:"contents",children:r})})})})})}):null})})}},33751:function(e,r,t){"use strict";t.d(r,{H:function(){return w}});var n=t(16835),i=t(59499),s=t(28332),o=t(40),c=t(81472),a=t(93205),u=t(1643),l=t(41664),d=t.n(l),f=t(67294),p=t(99816),b=t(1011),v=t(6830),g=t(62201),h=t(15277);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function w(e){var r=e.children,t=e.project,i=e.source,l=e.trackingSurface,m=e.align,w=void 0===m?"start":m,x=e.side,j=void 0===x?"top":x,S=e.sideOffset,O=void 0===S?8:S,k=(0,g.W_)({projectAddress:null==t?void 0:t.address}),A=y(y({},(0,v.u)({isSubscribed:k,projectAddress:null==t?void 0:t.address,source:i,forceModal:!0,trackingSurface:l}).buttonProps),{},{variant:k.value?"secondary":"primary",width:"full",size:"small"}),E=(0,p.pp)({project:t,displayStrings:["ens","address"],formatWalletAddress:function(e){return e.substring(0,6)}}),Z=f.useState(!1),P=(0,n.Z)(Z,2),C=P[0],D=P[1],_=(0,c.useTransition)(C,{from:{x:0},enter:{x:1},leave:{x:0},config:{duration:200}});return f.useEffect(function(){C&&s.track("subscribe__hover_opened",{source:i,trackingSurface:l})},[C,l,i]),(0,h.BX)(o.fC,{closeDelay:100,open:C,openDelay:200,onOpenChange:function(e){return D(e)},children:[(0,h.tZ)(o.xz,{children:r}),_(function(e,r){var n,i,s;return r?(0,h.tZ)(o.h_,{children:(0,h.tZ)(c.animated.div,{style:{opacity:e.x.to({range:[0,1],output:[0,1]})},children:(0,h.tZ)(o.VY,{align:w,asChild:!0,hideWhenDetached:!0,side:j,sideOffset:O,children:(0,h.BX)(a.xu,{backgroundColor:"background",borderColor:"foregroundSecondary",borderRadius:"2xLarge",borderWidth:"2px",display:"flex",flexDirection:"column",gap:"16px",padding:"16px",style:{width:360},children:[(0,h.BX)(a.xu,{alignItems:"center",display:"flex",gap:"4px",minWidth:"fit",width:"full",children:[(0,h.tZ)(d(),{href:null!==(n=(0,p.no)({project:t}))&&void 0!==n?n:"",children:(0,h.tZ)(a.qE,{address:null==t?void 0:t.address,ensAvatarHook:b.u,label:"Collection card publisher label",placeholder:!t,size:"40px",src:null==t?void 0:t.avatarURL})}),(0,h.tZ)(a.xu,{marginLeft:"8px",children:(0,h.BX)(d(),{href:null!==(i=(0,p.no)({project:t}))&&void 0!==i?i:"",children:[(0,h.tZ)(a.xv,{lineHeight:"none",size:"small",weight:"semiBold",children:null===(s=(0,p.pY)(t))||void 0===s?void 0:s.value}),(0,h.tZ)(a.xv,{color:"textTertiary",children:null==E?void 0:E.value})]})})]}),(null==t?void 0:t.description)&&(0,h.tZ)(a.xv,{color:"textSecondary",size:"small",children:(0,u.Z)(t.description,{length:128})}),(0,h.tZ)(a.zx,y(y({},A),{},{onClick:function(e){var r;e.preventDefault(),null===(r=A.onClick)||void 0===r||r.call(A,e)},children:k.value?"Subscribed":"Subscribe"}))]})})})}):null})]})}},13723:function(e,r,t){"use strict";t.d(r,{d:function(){return l},e:function(){return u}});var n=t(59499),i=t(71641),s=t(35266),o=t(26520);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(e){var r=(0,o.a)();return(0,i.a)(s.nBd,r.userAddress?a(a({},e),{},{variables:{walletAddress:r.userAddress}}):{skip:!0})}function l(e){switch(null==e?void 0:e.verificationStatus){case"EMAIL_VERIFIED":case"EMAIL_NOT_VERIFIED":return!0;default:return!1}}},99816:function(e,r,t){"use strict";t.d(r,{HE:function(){return d},LR:function(){return f},Ws:function(){return v},bG:function(){return g},ch:function(){return h},no:function(){return b},pY:function(){return p},pp:function(){return l}});var n=t(19485),i=t(67294),s=t(26520),o=t(92366),c=t(11794),a=t(49823);function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function l(e){if(!e.project)return null;var r,t,i=null!==(r=null==e?void 0:e.formatWalletAddress)&&void 0!==r?r:function(e){return(0,o.kS)(e)},s=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}}(e))){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw s}}}}(e.displayStrings);try{for(s.s();!(t=s.n()).done;){var c=t.value,a=e.project[c];if(a)return{value:"address"===c?i(n.getAddress(a)):a,rawValue:a,type:c}}}catch(e){s.e(e)}finally{s.f()}return null}var d=function(e,r){return l({project:e,displayStrings:["domain","ens","address"],formatWalletAddress:null==r?void 0:r.formatWalletAddress})},f=function(e){return l({project:e,displayStrings:["displayName","domain","ens"]})},p=function(e,r){return l({project:e,displayStrings:["displayName","domain","ens","address"],formatWalletAddress:null==r?void 0:r.formatWalletAddress})},b=function(e){var r,t,n,i,s,o=null!==(r=null!==(t=null===(n=e.project)||void 0===n?void 0:n.ens)&&void 0!==t?t:null===(i=e.project)||void 0===i?void 0:i.address)&&void 0!==r?r:e.fallbackAddress;if(!o)return null;var u=(0,c.c)(null===(s=e.project)||void 0===s?void 0:s.domain);return(0,a.k)("",o,u)};function v(e){var r,t,n;return e.membershipAddress&&null!==(r=null===(t=e.project)||void 0===t?void 0:null===(n=t.memberships)||void 0===n?void 0:n.find(function(r){var t,n;if((null==r?void 0:null===(t=r.address)||void 0===t?void 0:t.toLowerCase())===(null===(n=e.membershipAddress)||void 0===n?void 0:n.toLowerCase()))return r}))&&void 0!==r?r:null}function g(e){var r,t=(0,s.a)();return i.useMemo(function(){var r,n,i,s;return null!==(r=null!==(n=v({project:null===(i=e.data)||void 0===i?void 0:i.me,membershipAddress:t.projectAddress}))&&void 0!==n?n:null===(s=e.data)||void 0===s?void 0:s.me)&&void 0!==r?r:null},[t.projectAddress,null===(r=e.data)||void 0===r?void 0:r.me])}function h(e){return{__typename:"ProjectType",_id:e}}},48254:function(e,r,t){"use strict";t.d(r,{O:function(){return w},T:function(){return j}});var n=t(59499),i=t(50029),s=t(87794),o=t.n(s),c=t(51761),a=t(1203),u=t(35266),l=t(40188),d=t(67277),f=t(52779),p=t(65847),b=t(36765),v=t(97359);function g(e){var r=(0,b.iW)(e).selectionSet.selections[0];if((null==r?void 0:r.kind)!==v.h.FIELD)throw Error();return r.name.value}var h=t(13723);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function w(e,r){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(o().mark(function e(r,t){var n,i,s,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:try{i=(0,a.D0)().address}catch(e){}if(s=null!==(n=(0,l.v0)(f.l8).userAddress)&&void 0!==n?n:i){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,f.l8.query(y(y({},t),{},{query:u.HDN,variables:{projectAddress:r,walletAddress:s}}));case 9:if(!("boolean"!=typeof(c=e.sent).data.isSubscribed)){e.next=12;break}throw Error();case 12:return e.abrupt("return",c.data.isSubscribed);case 15:return e.prev=15,e.t0=e.catch(6),p.bz&&console.error("error reading isSubscribed cache in getIsSubscribed"),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[6,15]])}))).apply(this,arguments)}var j=function(e,r,t){var i=(0,l.v0)(f.l8).userAddress;if(i&&r.data&&(null===(a=r.errors)||void 0===a||!a.length)&&null!==(b=t.variables)&&void 0!==b&&b.projectAddress&&(null===(v=r.errors)||void 0===v||!v.length)){"subscribe"in r.data?y=r.data.subscribe:"unsubscribe"in r.data&&(y=r.data.unsubscribe);var s="subscribe"in r.data;if(!s||(0,h.d)(y)){e.writeQuery({query:u.HDN,variables:{projectAddress:null===(m=t.variables)||void 0===m?void 0:m.projectAddress,walletAddress:i},data:{isSubscribed:s}});try{var o=e.identify({__typename:"ProjectType",_id:t.variables.projectAddress});if(!o)throw Error();e.writeFragment({fragment:u.i1I,id:e.identify({__typename:"SuggestedCuratorsType",curator:(0,c.kQ)(o)}),data:{isSubscribed:s}})}catch(e){p.bz&&console.error("error setting SuggestCuratorSetIsSubscribedFragmentDoc cache",e)}try{var a,b,v,m,y,w,x=g(d.cN.inbox),j=g(d.cN.count);e.modify({fields:(w={},(0,n.Z)(w,x,function(e,r){return r.DELETE}),(0,n.Z)(w,j,function(e,r){return r.DELETE}),w)})}catch(e){p.bz&&console.error("error updating inbox cache",e)}}}}},26520:function(e,r,t){"use strict";t.d(r,{a:function(){return n.a}});var n=t(76028)},76028:function(e,r,t){"use strict";t.d(r,{a:function(){return S}});var n=t(59499),i=t(50029),s=t(16496),o=t(82118),c=t(87794),a=t.n(c),u=t(66252),l=t(819),d=t(67294),f=t(97544),p=t(69077),b=t(35266),v=t(69969),g=t(99214),h=t(86e3),m=t(67688),y=t(58356),w=t(40188);function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function S(){var e,r=(0,p.mA)(),t=(0,p.LN)(),n=(0,p.QW)(),c=(0,u.x)(),x=d.useCallback((0,o.Z)(a().mark(function e(){var i,o,u,l,d,p,v,g,w;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"check-wallet";case 2:if(r.address){e.next=4;break}throw Error("wallet not connected");case 4:return e.next=6,(0,s.Z)((0,m.Au)());case 6:return u=e.sent,e.next=9,(0,s.Z)((0,m.L8)(u));case 9:return l=e.sent,d=(0,y.getSiweStatement)({publicKey:l}),p=new f.SiweMessage({domain:window.location.host,address:r.address,statement:d,uri:window.location.origin,version:"1",chainId:null===(i=t.chain)||void 0===i?void 0:i.id}).prepareMessage(),e.next=14,(0,s.Z)(n.signMessageAsync({message:p}));case 14:return v=e.sent,e.next=17,"signing-in";case 17:return g={address:r.address,publicKey:JSON.stringify(l),signature:v,message:p},e.next=20,(0,s.Z)((0,m.ib)(u).catch(function(e){throw h.$e(function(r){r.setExtras(g),r.setTags({category:"sessions",step:"sessions.saveKeyPair"}),h.Tb(e)}),e}));case 20:return e.next=22,(0,s.Z)(c.mutate({mutation:b.LwY,fetchPolicy:"network-only",variables:g}).catch(function(e){throw h.$e(function(r){r.setExtras(g),r.setTags({category:"sessions",step:"sessions.signIn"}),h.Tb(e)}),e}));case 22:if(!(null!==(o=(w=e.sent).errors)&&void 0!==o&&o.length)){e.next=26;break}throw h.$e(function(e){e.setExtras(g),e.setTags({category:"sessions",step:"sessions.signInResult"}),h.Tb(w.errors)}),Error();case 26:c.resetStore().catch(function(){});case 27:case"end":return e.stop()}},e)})),[r.address,c,null===(e=t.chain)||void 0===e?void 0:e.id,n]),S=d.useCallback((0,i.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.c_)({apolloClient:c});case 2:case"end":return e.stop()}},e)})),[c]),O=d.useCallback(function(e){(0,w.Cc)(e),(0,w.K3)({sessionCookie:(0,w.cC)((0,g.RS)()?document.cookie:void 0),apolloCache:c.cache})},[c.cache]),k=d.useCallback((0,i.Z)(a().mark(function e(){var r,t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.bB)();case 3:if(r=e.sent){e.next=6;break}throw Error();case 6:return e.next=8,(0,m.L8)(r);case 8:return t=JSON.stringify(e.sent),e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,null,[[0,13]])})),[]),A=(0,l.J)({from:v.W,fragment:b.psG});return j(j({},(0,w.Mw)({walletAddress:r.address,sessionFragment:A.complete?A.data:null})),{},{login:x,logOut:S,setProjectAddress:O,getPublicKeyStringified:k})}},1011:function(e,r,t){"use strict";t.d(r,{u:function(){return o}});var n=t(19485),i=t(71028),s=t(69077);function o(e){try{e&&(r=n.getAddress(e))}catch(e){r=void 0}var r,t,o=(0,s.F6)({address:r,chainId:1}).data;try{t=o?(0,i.F)(o):null}catch(e){t=null}var c=(0,s.c9)({name:t,chainId:1}).data;return null!=c?c:void 0}},39470:function(e,r,t){"use strict";t.d(r,{a:function(){return s}});var n=t(16835),i=t(67294),s=function(e){var r=i.useState(!1),t=(0,n.Z)(r,2),s=t[0],o=t[1];return i.useEffect(function(){if(window.matchMedia){var r=window.matchMedia(e);r.matches!==s&&o(r.matches);var t=function(){return o(r.matches)};return r.addListener(t),function(){return r.removeListener(t)}}},[s,e]),s}},6830:function(e,r,t){"use strict";t.d(r,{u:function(){return g}});var n=t(50029),i=t(16835),s=t(87794),o=t.n(s),c=t(28332),a=t(50319),u=t(73359),l=t(67294),d=t(35266),f=t(48254),p=t(62201),b=t(52779),v=t(40188);function g(e){var r=(0,a.D)(d.ngk),t=(0,i.Z)(r,2),s=t[0],g=t[1],h=(0,a.D)(d.Yio),m=(0,i.Z)(h,2),y=m[0],w=m[1],x=(0,u.t)(d.HDN),j=(0,i.Z)(x,1)[0],S=l.useContext(p.T$),O=l.useCallback((0,n.Z)(o().mark(function r(){var t,n,i;return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.projectAddress){r.next=2;break}return r.abrupt("return");case 2:if(t=(0,v.v0)(b.l8).userAddress,r.prev=3,t){r.next=6;break}throw Error();case 6:if(!e.isSubscribed.value){r.next=11;break}return r.next=9,y({variables:{projectAddress:e.projectAddress},update:f.T});case 9:r.next=14;break;case 11:return"CollectFlow"===e.source&&c.track("subscribe_click_wnft"),r.next=14,s({variables:{projectAddress:e.projectAddress,source:e.source},update:f.T});case 14:return r.next=16,j({variables:{walletAddress:t,projectAddress:e.projectAddress},fetchPolicy:"cache-only"});case 16:if(r.t1=n=r.sent.data,r.t0=null===r.t1,r.t0){r.next=20;break}r.t0=void 0===n;case 20:if(!r.t0){r.next=24;break}r.t2=void 0,r.next=25;break;case 24:r.t2=n.isSubscribed;case 25:if(void 0!=(i=r.t2)){r.next=28;break}throw Error();case 28:if(e.isSubscribed.value!==i){r.next=30;break}throw Error();case 30:c.track(i?"subscribe__one_click":"subscribe__one_click_unsub",{source:e.source,trackingSurface:e.trackingSurface}),r.next=37;break;case 33:return r.prev=33,r.t3=r.catch(3),r.next=37,S({source:e.source,projectAddress:e.projectAddress,forceModal:e.forceModal});case 37:case"end":return r.stop()}},r,null,[[3,33]])})),[e.forceModal,e.isSubscribed.value,e.projectAddress,e.source,e.trackingSurface,j,s,S,y]),k=g.loading||w.loading;return{buttonProps:{onClick:O,variant:e.isSubscribed.value?"secondary":"primary",children:e.isSubscribed.value?"Subscribed":"Subscribe",disabled:k}}}},67277:function(e,r,t){"use strict";t.d(r,{CF:function(){return i},V5:function(){return c},bN:function(){return o},cN:function(){return s}});var n=t(35266),i=t(65847).bz?"0x94E037D633A04d53A13B5927EBd98e5cCD216f4e":"0x1744acdb2c989Fcc9070d139B88a7d460FCF9b7F",s={count:n.sCc,inbox:n.ooV},o=4,c=["All","Published","Collected"]},62201:function(e,r,t){"use strict";t.d(r,{Ij:function(){return j},KK:function(){return Z},T$:function(){return w},TL:function(){return i},W_:function(){return S},fc:function(){return O},kl:function(){return E},yP:function(){return A}});var n,i,s=t(59499),o=t(16835),c=t(50029),a=t(87794),u=t.n(a),l=t(71641),d=t(50319),f=t(1203),p=t(91131),b=t(67294),v=t(69077),g=t(35266),h=t(26520),m=t(99214);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var w=b.createContext((0,c.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))),x=(0,p.cn)({});function j(e){var r=(0,p.KO)(x),t=(0,o.Z)(r,2),n=t[0],i=t[1];return{walletlessSubscriptionId:e?n[e]:void 0,setWalletlessSubscriptionId:function(r){i(function(t){var n=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},t);return e&&(n[e]=r),n})}}}function S(e){var r,t,n,i,s=(0,h.a)(),o=(0,v.mA)(),c=null!==(r=s.userAddress)&&void 0!==r?r:o.address,a=(0,l.a)(g.HDN,c&&e.projectAddress?{variables:{projectAddress:e.projectAddress,walletAddress:c}}:{skip:!0}),u={value:!!(null!==(t=a.data)&&void 0!==t&&t.isSubscribed),loading:a.loading},d=j(e.projectAddress).walletlessSubscriptionId,f=(0,l.a)(g.ohr,d?{variables:{id:d},fetchPolicy:"cache-first"}:{skip:!0}),p={value:(null===(n=f.data)||void 0===n?void 0:null===(i=n.walletlessSubscription)||void 0===i?void 0:i.subscriptionStatus)==="SUBSCRIBED",loading:f.loading};return c?u:p}function O(e){var r;return(r=e.isConnectedToWallet?null:i.connectWallet,"subscribe"===e.goal)?e.isConnectedToWallet||e.isLoggedIn||e.bypassWalletless?e.isLoggedIn?e.hasUnlinkEmailRequest?null!=r?r:i.unlinkEmail:null===e.subscriptionEmailVerificationStatus?i.loading:"EMAIL_NOT_SUBMITTED"===e.subscriptionEmailVerificationStatus?null!=r?r:i.linkEmail:"EMAIL_VERIFIED"!==e.subscriptionEmailVerificationStatus?null!=r?r:i.verifyEmail:null===e.isWalletSubscribed?i.loading:e.isWalletSubscribed?i.subscribed:i.subscribe:null!=r?r:i.login:e.hasWalletlessSubscriptionAttempt?null===e.walletlessSubscriptionStatus?i.loading:"UNSUBSCRIBED"===e.walletlessSubscriptionStatus?i.unsubscribed:"SUBSCRIBED"!==e.walletlessSubscriptionStatus?i.walletlessConfirmEmail:i.walletlessSubscribed:i.walletlessEnterEmail:e.isLoggedIn?null===e.isWalletSubscribed?i.loading:e.isWalletSubscribed?i.unsubscribe:i.unsubscribed:null!=r?r:i.login}(n=i||(i={}))[n.loading=0]="loading",n[n.login=1]="login",n[n.connectWallet=2]="connectWallet",n[n.linkEmail=3]="linkEmail",n[n.subscribe=4]="subscribe",n[n.verifyEmail=5]="verifyEmail",n[n.unlinkEmail=6]="unlinkEmail",n[n.subscribed=7]="subscribed",n[n.unsubscribe=8]="unsubscribe",n[n.unsubscribed=9]="unsubscribed",n[n.walletlessEnterEmail=10]="walletlessEnterEmail",n[n.walletlessConfirmEmail=11]="walletlessConfirmEmail",n[n.walletlessSubscribed=12]="walletlessSubscribed";var k="walletless_subscription_token";function A(e){(0,m.H6)(k,e,{path:"/",maxAge:31536e3,secure:!0})}function E(){return(0,m.ej)(k)}function Z(){var e=(0,d.D)(g.bJ4),r=(0,o.Z)(e,2),t=r[0];return{walletlessSubscribe:function(e){return(0,c.Z)(u().mark(function r(){var n,i,s,o,c;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:try{n=(0,f.D0)().address}catch(e){}return r.prev=1,r.next=4,t({variables:{email:e.email,projectAddress:e.projectAddress,source:e.source,walletlessSubscriptionToken:E(),walletAddress:n}});case 4:return c=r.sent,r.abrupt("return",null!==(i=null===(s=c.data)||void 0===s?void 0:null===(o=s.walletlessSubscribe)||void 0===o?void 0:o._id)&&void 0!==i?i:void 0);case 8:r.prev=8,r.t0=r.catch(1);case 10:case"end":return r.stop()}},r,null,[[1,8]])}))()},walletlessSubscribeLoading:r[1].loading}}},92366:function(e,r,t){"use strict";t.d(r,{FP:function(){return s},_W:function(){return l},aS:function(){return i},az:function(){return d},d:function(){return c},dm:function(){return u},kS:function(){return o},x6:function(){return a}});var n=t(75606);function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:42,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e?e.length<=r?e:e.slice(0,r)+t:""}function s(e){return i(e,6,"")}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=r;return e?(e.startsWith("0x")&&(t=r+2),e.slice(0,t)+"…"+e.slice(e.length-r,e.length)):""}function c(e){return!!e&&n.i_.test(e)}function a(e){return e?parseFloat(e).toLocaleString():"0"}function u(e){if(!e)return e;if(e<1e4)return a(e);for(var r=e,t=0;r>=1e3;)r/=1e3,t++;return parseFloat(r.toPrecision(3)).toString()+["","K","M","B","T"][t]}function l(e){return String(Number.parseFloat(e).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,",")}var d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ETH",t="string"==typeof e?parseFloat(e):e;return"".concat(t.toFixed(Number.isInteger(t)&&t>=10?0:2)," ").concat(r)}},49823:function(e,r,t){"use strict";t.d(r,{k:function(){return i}});var n=t(78242),i=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return t?"".concat((0,n.FF)(),"://").concat(t,".").concat((0,n.vm)()).concat(e):"".concat((0,n.FF)(),"://").concat((0,n.vm)(),"/").concat(r).concat(e)}},75606:function(e,r,t){"use strict";t.d(r,{i_:function(){return n}});var n=new RegExp("^".concat("0x[a-fA-F0-9]{40}","$"));new RegExp("^".concat("[a-zA-Z0-9-_]{43}","$")),new RegExp("^".concat("((?:(?!://)(?:[a-zA-Z0-9-_]+.)*[a-zA-Z0-9][a-zA-Z0-9-_]+.[a-zA-Z]{2,11}))","$"))},33583:function(){}}]);
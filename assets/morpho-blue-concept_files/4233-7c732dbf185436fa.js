(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4233],{44731:function(e,t,n){"use strict";n.d(t,{WZ:function(){return r},c3:function(){return o},kH:function(){return a}});var r,i,a=n(67294).createContext(function(){return Promise.resolve(!1)});function o(e){var t;return(t=e.isConnectedToWallet?null:r.connectWallet,e.isLoggedIn)?e.hasUnlinkEmailRequest?null!=t?t:r.unlinkEmail:null===e.subscriptionEmailVerificationStatus?r.loading:"EMAIL_NOT_SUBMITTED"===e.subscriptionEmailVerificationStatus?null!=t?t:r.linkEmail:null!=t?t:r.verifyEmail:null!=t?t:r.login}(i=r||(r={}))[i.loading=0]="loading",i[i.login=1]="login",i[i.connectWallet=2]="connectWallet",i[i.linkEmail=3]="linkEmail",i[i.unlinkEmail=4]="unlinkEmail",i[i.verifyEmail=5]="verifyEmail"},25819:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=n(67294).createContext(function(){})},34962:function(e,t,n){"use strict";n.d(t,{F:function(){return u}});var r=n(59499),i=n(4730),a=n(9008),o=n.n(a),s=n(15277),c=["key"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u=function(e){var t,n,a,u,d=e.canonical,p=e.children,f=e.customMetaTags,m=void 0===f?[]:f,b=e.description,h=e.openGraph,v=void 0===h?{}:h,g=e.title,x=e.twitter,k=void 0===x?{}:x,w=e.fcFrame,Z=null!==(t=v.title)&&void 0!==t?t:g,y=null!==(n=v.description)&&void 0!==n?n:b,_=null!==(a=v.url)&&void 0!==a?a:d,S=[];return d&&S.push((0,s.tZ)("link",{href:d,rel:"canonical"},"canonical")),g&&S.push((0,s.tZ)("title",{children:g},"title")),b&&S.push((0,s.tZ)("meta",{content:b,property:"description"},"description")),Z&&S.push((0,s.tZ)("meta",{content:Z,property:"og:title"},"og:title")),y&&S.push((0,s.tZ)("meta",{content:y,property:"og:description"},"og:description")),_&&S.push((0,s.tZ)("meta",{content:_,property:"og:url"},"og:url")),void 0!=v.image&&S.push((0,s.tZ)("meta",{content:v.image,property:"og:image"},"og:image")),v.siteName&&S.push((0,s.tZ)("meta",{content:v.siteName,property:"og:site_name"},"og:site_name")),k.card&&S.push((0,s.tZ)("meta",{content:k.card,name:"twitter:card"},"twitter:card")),k.site&&S.push((0,s.tZ)("meta",{content:k.site,name:"twitter:site"},"twitter:site")),k.theme&&S.push((0,s.tZ)("meta",{content:k.theme,name:"twitter:widgets:theme"},"twitter:theme")),null!=w&&w.frameVersion&&S.push((0,s.tZ)("meta",{content:w.frameVersion,property:"fc:frame"})),null!=w&&w.image&&S.push((0,s.tZ)("meta",{content:w.image,property:"fc:frame:image"})),null!=w&&null!==(u=w.buttons)&&void 0!==u&&u.length&&w.buttons.map(function(e,t){S.push((0,s.tZ)("meta",{content:e.label,property:"fc:frame:button:".concat(t+1)})),e.action&&("mint"===e.action?(S.push((0,s.tZ)("meta",{content:e.action,property:"fc:frame:button:".concat(t+1,":action")})),S.push((0,s.tZ)("meta",{content:e.target,property:"fc:frame:button:".concat(t+1,":target")}))):S.push((0,s.tZ)("meta",{content:e.action,property:"fc:frame:button:".concat(t+1,":action")})))}),null!=w&&w.postUrl&&S.push((0,s.tZ)("meta",{content:w.postUrl,property:"fc:frame:post_url"})),null!=w&&w.textInput&&S.push((0,s.tZ)("meta",{content:w.textInput.label,property:"fc:frame:input:text"})),null!=w&&w.aspectRatio&&S.push((0,s.tZ)("meta",{content:w.aspectRatio,property:"fc:frame:image:aspect_ratio"})),m.length>0&&S.push(m.map(function(e,t){var n=e.key,a=(0,i.Z)(e,c);return(0,s.tZ)("meta",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a),"meta-".concat(n||t))})),(0,s.BX)(o(),{children:[S,p]})}},6430:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(93205),i=n(1011),a=n(92366),o=n(15277),s=function(e){var t,n=e.size,s=void 0===n?"medium":n,c=e.address,l=e.avatarURL,u=e.displayName,d=e.ens,p=e.color,f="textSecondary";return p&&(f=p),(0,o.tZ)(r.Od,{children:(0,o.BX)(r.xu,{alignItems:"center",display:"flex",gap:"8px",overflow:"hidden",width:"full",children:[(0,o.tZ)(r.qE,{address:null!=c?c:void 0,ensAvatarHook:i.u,label:"Publisher Avatar ".concat(null!==(t=null!=u?u:d)&&void 0!==t?t:c),placeholder:!l,size:"small"===s?"20px":"24px",src:null!=l?l:void 0}),(0,o.tZ)(r.xv,{color:f,ellipsis:!0,lineHeight:"1.5",size:"small"===s?"small":"base",weight:"small"===s?"medium":"semiBold",whiteSpace:"nowrap",children:null!=u?u:d}),(0,o.tZ)(r.Vp,{size:"small"===s?"small":"medium",children:(0,a.FP)(c)})]})})}},17360:function(e,t,n){"use strict";var r=n(50029),i=n(16835),a=n(87794),o=n.n(a),s=n(71641),c=n(93205),l=n(11163),u=n.n(l),d=n(67294),p=n(69077),f=n(31800),m=n(35266),b=n(76028),h=n(15277);function v(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(v=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new v(e)}t.Z=function(e){var t,n,a,l,g=e.onSuccess,x=e.onClose,k=(0,p.mA)(),w=(0,p.qL)().disconnect,Z=d.useState(null),y=(0,i.Z)(Z,2),_=y[0],S=y[1],C=(0,s.a)(m.XzQ,{variables:{address:k.address},skip:!k.address}).data,j=(0,b.a)().login,E=null===(n=null==C?void 0:null===(a=C.mirrorProject)||void 0===a?void 0:a.isRegistered)||void 0===n||n,A=(t=(0,r.Z)(o().mark(function e(){var t,n,r,i,a,s,c,l;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=!1,i=!1,e.prev=3,s=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new v(t.call(e));n="@@asyncIterator",r="@@iterator"}throw TypeError("Object is not async iterable")}(j());case 5:return e.next=7,s.next();case 7:if(!(r=!(c=e.sent).done)){e.next=13;break}S(c.value);case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),i=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!(r&&null!=s.return)){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!i){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:null==g||g(),l=null===(t=u().query)||void 0===t?void 0:null===(n=t[f.rX])||void 0===n?void 0:n.toString(),!E&&u().asPath.startsWith("/dashboard")?u().push("/dashboard/onboarding/basics"):l&&u().push(l),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),S(null);case 37:case"end":return e.stop()}},e,null,[[0,34],[3,15,19,29],[20,,24,28]])})),function(){return t.apply(this,arguments)}),O=null!==_;switch(_){case null:l="Sign In";break;case"check-wallet":l="Check Wallet";break;case"signing-in":l="Signing In"}return(0,h.BX)(c.xu,{display:"flex",flexDirection:"column",gap:"8px",textAlign:"center",children:[!!x&&(0,h.tZ)(c.xu,{display:"flex",justifyContent:"flex-end",width:"full",children:(0,h.tZ)(c.xu,{cursor:"pointer",onClick:x,children:(0,h.tZ)(c.bM,{color:{base:"textTertiary",hover:"text"},size:"20px"})})}),(0,h.BX)(c.Kq,{direction:"vertical",space:{xs:"16px",sm:"24px"},children:[(0,h.BX)(c.Kq,{space:"8px",children:[(0,h.tZ)(c.xv,{size:"extraLarge",weight:"semiBold",children:"You're signed out"}),(0,h.tZ)(c.xv,{color:"textSecondary",size:"small",children:"Sign a message in your wallet to verify that you’re the owner of the connected address."})]}),(0,h.BX)(c.xu,{display:"flex",flexWrap:"wrap",gap:"10px",justifyContent:"center",width:"full",children:[(0,h.tZ)(c.zx,{disabled:O,loading:O,size:"medium",width:"full",onClick:A,children:l}),(0,h.tZ)(c.xu,{as:"button",color:{base:"textTertiary",hover:"accent"},cursor:"pointer",transitionDuration:"150",transitionProperty:"colors",onClick:function(){return w()},children:(0,h.tZ)(c.xv,{color:"inherit",size:"small",weight:"semiBold",children:"Disconnect"})})]})]})]})}},19155:function(e,t,n){"use strict";n.d(t,{Fb:function(){return r.F},rU:function(){return c},JG:function(){return l.J},rL:function(){return h},ZM:function(){return k}});var r=n(34962),i=n(93205),a=n(41664),o=n.n(a);n(67294);var s=n(15277),c=function(e){var t=e.as,n=e.children,r=e.className,a=e.href,c=e.passHref,l=e.underline;return a.startsWith("/")?(0,s.tZ)(o(),{as:t,href:a,legacyBehavior:!0,passHref:!0,children:c?n:(0,s.tZ)(i.xu,{as:"a",className:r,children:n})}):(0,s.tZ)(i.xu,{as:"a",className:r,href:a,rel:"noopener noreferrer",style:l?{textDecoration:"underline"}:{},target:"_blank",children:n})};n(73935),n(14154);var l=n(6430),u=n(59499),d=n(4730),p=n(98453);n(39810),n(99833);var f=["children"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={Link:function(e){var t=e.children,n=(0,d.Z)(e,f);return(0,s.tZ)(i.xu,b(b({as:p.p,className:"lqfft50"},n),{},{style:{background:i.gR.colors.background,color:i.gR.colors.foreground,fontFamily:i.gR.fonts.sans},children:t}))},Content:p.f},v=n(92366);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){var t=e.label,n=e.hideLabel,r=e.value;return(0,s.tZ)(i.gN,{hideLabel:n,label:t,children:function(e){return(0,s.BX)(i.xu,{alignItems:"center",backgroundColor:"foregroundTertiary",borderRadius:"large",display:"flex",height:"48px",justifyContent:"space-between",paddingX:"16px",position:"relative",children:[(0,s.tZ)(i.xu,x(x({},null==e?void 0:e.content),{},{as:"input",backgroundColor:"transparent",color:"text",fontSize:"small",fontWeight:"semiBold",readOnly:!0,value:(0,v.kS)(r)})),(0,s.tZ)(i.nr,{size:"24px"})]})}})};n(39417)},8765:function(e,t,n){"use strict";n.d(t,{CH:function(){return v},LP:function(){return f},LS:function(){return Z},Qn:function(){return k},Qq:function(){return y},W3:function(){return w},Xv:function(){return p},_2:function(){return S},bG:function(){return d},gZ:function(){return u},hw:function(){return m},n2:function(){return b},qL:function(){return g},tq:function(){return _},zp:function(){return x}});var r=n(50029),i=n(87794),a=n.n(i),o=n(28332),s=n(1203),c=n(35266),l=n(52779);function u(){o.track("global_nav__wallet_menu_opened")}function d(){o.track("global_nav__create_menu_opened")}function p(){o.track("global_nav__create_menu_closed")}function f(e){o.track("global_nav__create_entry_clicked",{source:e})}function m(e){o.track("global_nav__create_nft_clicked",{source:e})}function b(){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=(0,s.D0)().address}catch(e){}if(t){e.next=5;break}n=!1,e.next=21;break;case 5:return e.prev=5,e.next=8,l.l8.query({fetchPolicy:"cache-first",query:c.XzQ,variables:{address:t}});case 8:if(e.t2=r=e.sent.data.mirrorProject,e.t1=null!==e.t2,!e.t1){e.next=12;break}e.t1=void 0!==r;case 12:if(e.t0=e.t1,!e.t0){e.next=15;break}e.t0=r.projectDetails;case 15:n=!!e.t0,e.next=21;break;case 18:e.prev=18,e.t3=e.catch(5),n=!1;case 21:o.track("global_nav__signin_modal_viewed",{has_project:n});case 22:case"end":return e.stop()}},e,null,[[5,18]])}))).apply(this,arguments)}function v(){o.track("global_nav__signed_in")}function g(){o.track("global_nav__profile_clicked")}function x(){o.track("global_nav__profile_avatar_clicked")}function k(){o.track("global_nav__dashboard_clicked")}function w(){o.track("global_nav__settings_clicked")}function Z(){o.track("global_nav__support_clicked")}function y(){o.track("global_nav__inbox_clicked")}function _(){o.track("global_nav__explore_clicked")}function S(){o.track("global_nav__mirror_icon_clicked")}},1038:function(e,t,n){"use strict";n.d(t,{T:function(){return d},_:function(){return u}});var r=n(50029),i=n(87794),a=n.n(i),o=n(71641),s=n(67294),c=n(69077),l=n(35266),u=function(e){var t,n,r=e.wnftPrice,i=e.wnftChainId,a=e.balances,o=e.loadingBalances;if(void 0==i||void 0==r||o||!a)return"loading";var s=null!==(t=null===(n=a.find(function(e){return(null==e?void 0:e.chainId)===i}))||void 0===n?void 0:n.balance)&&void 0!==t?t:null;return void 0==s?"ok":s<=r?"under":"ok"},d=function(e){var t=e.price,n=e.chainId,i=e.skip,d=(0,c.mA)().address,p=(0,o.a)(l.ajh,!i&&d?{variables:{address:d},nextFetchPolicy:"network-only"}:{skip:!0});return s.useMemo(function(){var e;return{value:u({wnftChainId:n,wnftPrice:t,loadingBalances:p.loading,balances:null===(e=p.data)||void 0===e?void 0:e.balances}),refetch:function(){return(0,r.Z)(a().mark(function e(){var r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.refetch();case 3:i=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","loading");case 9:return e.abrupt("return",u({wnftChainId:n,wnftPrice:t,loadingBalances:i.loading,balances:null===(r=i.data)||void 0===r?void 0:r.balances}));case 10:case"end":return e.stop()}},e,null,[[0,6]])}))()}}},[p,n,t])}},4233:function(e,t,n){"use strict";n.d(t,{e:function(){return K}});var r=n(28332),i=n(93205),a=n(67294),o=n(69077),s=n(50029),c=n(16835),l=n(87794),u=n.n(l),d=n(13723),p=n(40188),f=n(52779),m=n(26520),b=n(99153),h=n(44731),v=n(17360),g=n(15277);function x(){var e,t,n,r=a.useState(),s=(0,c.Z)(r,2),l=s[0],u=s[1],p=a.useState(!1),f=(0,c.Z)(p,2),x=f[0],k=f[1],w=(0,o.mA)(),Z=(0,o.qL)().disconnect,y=(0,m.a)(),_=null===(e=(0,d.e)().data)||void 0===e?void 0:e.subscriptionEmail;switch((0,h.c3)({isConnectedToWallet:w.isConnected,isLoggedIn:y.isLoggedIn,subscriptionEmailVerificationStatus:null!==(t=null==_?void 0:_.verificationStatus)&&void 0!==t?t:null,hasUnlinkEmailRequest:x})){case h.WZ.loading:return(0,g.tZ)(i.xu,{display:"flex",justifyContent:"center",paddingY:"32px",children:(0,g.tZ)(i.$j,{})});case h.WZ.connectWallet:return(0,g.tZ)(b.lj,{});case h.WZ.login:return(0,g.tZ)(v.Z,{});case h.WZ.linkEmail:return(0,g.tZ)(b.w8,{account:y.userAddress,initialEmail:void 0,onDisconnect:function(){Z(),y.logOut(),u(void 0),k(!1)},onError:function(){},onSuccess:function(e){u(e.email)}});case h.WZ.unlinkEmail:return(0,g.tZ)(b.a7,{account:y.userAddress,onCancel:function(){k(!1)},onSuccess:function(){k(!1)}});case h.WZ.verifyEmail:return(0,g.tZ)(b.if,{account:y.userAddress,email:null!=l?l:null==_?void 0:null===(n=_.maskedEmail)||void 0===n?void 0:n.replace(/\*/g,"•"),onClickRelink:function(){k(!0)},onResendEmail:function(){}});default:return null}}var k=n(15531);function w(e){var t,n=a.useState(null),r=(0,c.Z)(n,2),o=r[0],l=r[1],m=(0,d.e)({fetchPolicy:"cache-only"}),b=m.data,v=m.refetch,w=a.useCallback((0,s.Z)(u().mark(function e(){var t;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.v0)(f.l8).isLoggedIn){e.next=11;break}return e.prev=1,e.next=4,v();case 4:if(t=e.sent,!(0,d.d)(t.data.subscriptionEmail)){e.next=7;break}return e.abrupt("return",!0);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.abrupt("return",new Promise(function(e){null==o||o(!1),l(function(){return e})}));case 12:case"end":return e.stop()}},e,null,[[1,9]])})),[v,o]),Z=!!o&&(null==b?void 0:null===(t=b.subscriptionEmail)||void 0===t?void 0:t.verificationStatus)==="EMAIL_VERIFIED";return a.useEffect(function(){Z&&(o(!0),l(null))},[o,Z]),(0,g.BX)(g.HY,{children:[(0,g.tZ)(h.kH.Provider,{value:w,children:e.children}),(0,g.tZ)(k.Z,{isOpen:!!o,onClose:function(){null==o||o(!1),l(null)},children:(0,g.tZ)(i.xu,{backgroundColor:"background",borderBottomRadius:{xs:"none",sm:"3xLarge"},borderRadius:"3xLarge",display:"flex",overflow:"hidden",children:(0,g.tZ)(i.xu,{display:"flex",flexDirection:"column",maxWidth:"full",padding:{xs:"16px",sm:"24px"},width:"448px",children:(0,g.tZ)(x,{})})})})]})}var Z=n(71641),y=n(69686),_=n(11163),S=n.n(_),C=n(8765),j=n(35266),E=n(22396),A=n(67688),O=n(97811);function P(e){var t,n,r,l=(0,o.mA)(),d=(0,E.t)(),p=a.useState(!1),f=(0,c.Z)(p,2),b=f[0],h=f[1],x=(0,y.dd)({onConnect:function(e){return(0,s.Z)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.address){t.next=6;break}return t.next=3,(0,A.b)(e.address);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=!1;case 7:h(t.t0);case 9:case"end":return t.stop()}},t)}))()}}),w=x.setOpen,_=x.open,P=(0,m.a)(),z=a.useState(!1),W=(0,c.Z)(z,2),L=W[0],B=W[1];L&&!_&&(!l.isConnected||P.isLoggedIn)&&B(!1);var I=d&&(e.authRequiredIfWalletConnected&&l.isConnected&&!P.isLoggedIn||!_&&L),D=a.useCallback(function(){B(!0),l.isConnected||_||w(!0)},[_,w,l.isConnected]),T=a.useCallback(function(){B(!1)},[]);a.useEffect(function(){I&&C.n2()},[I]);var X=null===(t=(0,Z.a)(j.zpS,l.address&&b?{variables:{address:l.address}}:{skip:!0}).data)||void 0===t?void 0:null===(n=t.userProfile)||void 0===n?void 0:n.domain;return r=b?X?(0,g.BX)(i.Kq,{space:"24px",children:[(0,g.tZ)(i.xv,{color:"text",size:"base",children:"Multi-signature wallets cannot generate signing keys. Add an account in your contributor settings to use Mirror."}),(0,g.tZ)(i.zx,{center:!0,variant:"primary",width:"full",onClick:function(){T(),S().push("/dashboard/settings/contributors")},children:"Go to Contributor Settings"})]}):(0,g.tZ)(i.Kq,{space:"24px",children:(0,g.tZ)(i.xv,{color:"text",size:"base",children:"Multi-signature wallets cannot generate signing keys. Connect a personal wallet to Mirror instead."})}):(0,g.tZ)(v.Z,{onClose:e.authRequiredIfWalletConnected?void 0:T,onSuccess:function(){C.CH(),T()}}),(0,g.BX)(g.HY,{children:[(0,g.tZ)(O.q.Provider,{value:D,children:e.children}),(0,g.tZ)(k.Z,{isOpen:I,onClose:e.authRequiredIfWalletConnected?void 0:T,children:(0,g.tZ)(i.xu,{backgroundColor:"background",borderRadius:"2xLarge",maxWidth:"384px",minWidth:{xs:"auto",sm:"256px"},padding:{xs:"16px",sm:"24px"},paddingTop:"24px",textAlign:"center",children:r})})]})}var z=n(73359),W=n(54725),L=function(e){var t=e.cb,n=e.key;a.useEffect(function(){if(t){var e={current:0},n={current:void 0};return!function r(){var i=1e3*Math.pow(2,e.current);e.current=Math.min(6,e.current+1),n.current=window.setTimeout(function(){t(),r()},i)}(),function(){window.clearTimeout(n.current)}}},[t,n])},B=n(1038),I=n(83060),D=n(25819),T=function(e){var t,n,r,i,s,l,u,p,f,b,h=(0,m.a)(),v=(0,o.mA)(),x=(0,o.qL)().disconnect,k=null!==(t=h.userAddress)&&void 0!==t?t:v.address,w=a.useState(!1),y=(0,c.Z)(w,2),_=y[0],S=y[1],C=a.useState(void 0),E=(0,c.Z)(C,2),A=E[0],O=E[1],P=a.useState(void 0),T=(0,c.Z)(P,2),X=T[0],R=T[1],q=a.useState(null),N=(0,c.Z)(q,2),K=N[0],H=N[1],M=a.useState(void 0),U=(0,c.Z)(M,2),Y=U[0],F=U[1],V=a.useState(!1),G=(0,c.Z)(V,2),Q=G[0],J=G[1],$=(0,Z.a)(j.HDU,A?{variables:{digest:A}}:{skip:!0}),ee=$.data,et=$.loading,en=$.refetch,er=null==ee?void 0:null===(n=ee.entry)||void 0===n?void 0:n.writingNFT,ei=(0,B.T)({chainId:null==er?void 0:null===(r=er.network)||void 0===r?void 0:r.chainId,price:null==er?void 0:er.price}),ea=(0,Z.a)(j.enU,k&&A?{variables:{entryDigest:A,walletAddress:k}}:{skip:!0}),eo=ea.data,es=ea.refetch,ec=null!=K?K:null==eo?void 0:null===(i=eo.getWritingNftPurchase)||void 0===i?void 0:i.transactionHash;L({cb:ec?en:null});var el=!!(null!==(s=(0,Z.a)(j.HDN,k&&null!=er&&null!==(l=er.publisher)&&void 0!==l&&null!==(u=l.project)&&void 0!==u&&u.address?{variables:{projectAddress:null==er?void 0:null===(p=er.publisher)||void 0===p?void 0:null===(f=p.project)||void 0===f?void 0:f.address,walletAddress:k}}:{skip:!0}).data)&&void 0!==s&&s.isSubscribed),eu=!!A&&!!er,ed=(0,z.t)(j.NdW),ep=(0,c.Z)(ed,1)[0],ef=null===(b=(0,d.e)({skip:!eu}).data)||void 0===b?void 0:b.subscriptionEmail,em=(0,d.d)(ef)&&!el;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(D.V.Provider,{value:_?void 0:function(e,t,n,r,i){W.cn(n,e),O(n),F("".concat(t,"-").concat(e)),J(!!r),R(i)},children:e.children}),(0,g.tZ)(I.y,{canOneClickSubscribe:em,close:_?void 0:function(){O(void 0),H(null),S(!1),F(void 0),J(!1),R(void 0)},entryDigest:A,isOpen:eu,isSubscribed:el,loading:et,lowBalanceCheck:ei.value,referrerAddress:null!=X?X:void 0,refetchLowBalanceCheck:ei.refetch,setLocked:S,showIframe:Q,successfullTransactionHash:null!=ec?ec:void 0,trackingOrigin:Y,wnft:er,onDisconnect:x,onSuccess:function(e){H(e),es(),A&&ep({variables:{digest:A},fetchPolicy:"network-only"})}},"".concat(A,"-").concat(v.address))]})},X=n(19155),R=n(66574),q=n(62201);function N(e){var t=a.useState(null),n=(0,c.Z)(t,2),o=n[0],s=n[1],l=a.useState(null),u=(0,c.Z)(l,2),d=u[0],p=u[1],f=a.useCallback(function(e){null==o||o(),s(function(){return e})},[o]),m=a.useCallback(function(e){return r.track("subscribe__opened",{address__project:e.projectAddress,source__:e.source}),p(e),new Promise(function(e){f(e)})},[f]);return(0,g.BX)(g.HY,{children:[(0,g.tZ)(q.T$.Provider,{value:m,children:e.children}),!!d&&(0,g.tZ)(k.Z,{isOpen:!!o,onClose:function(){f(null)},children:(0,g.tZ)(i.xu,{backgroundColor:"background",borderBottomRadius:{xs:"none",sm:"3xLarge"},borderRadius:"3xLarge",display:"flex",overflow:"hidden",children:(0,g.tZ)(i.xu,{display:"flex",flexDirection:"column",maxWidth:"full",padding:{xs:"16px",sm:"24px"},width:"448px",children:(0,g.tZ)(b.xW,{projectAddress:d.projectAddress,source:d.source,onSubscribeSuccessContinue:function(){f(null)},onUnsubscribeSuccessContinue:function(){f(null)}})})})})]})}var K=function(e){var t=e.authRequiredIfWalletConnected,n=e.children,s=e.description,c=void 0===s?"Built on web3 for web3, Mirror’s robust publishing platform pushes the boundaries of writing online—whether it’s the next big white paper or a weekly community update.":s,l=e.title,u=void 0===l?"Mirror: The home for web3 publishing":l,d=e.favicon,p=(0,o.mA)({onConnect:function(e){var t=e.connector;return r.track("connect_wallet",{connector:null==t?void 0:t.name})}}).connector,f=(0,i.Fg)(),m=f.mode,b=f.forcedMode;a.useEffect(function(){p&&R.Z.setProvider(p)},[p]);var h=a.useMemo(function(){return(0,g.BX)(X.Fb,{description:c,openGraph:{image:"https://mirror.xyz/images/social.png"},title:u,twitter:{card:"summary_large_image",theme:null!=b?b:m},children:[(0,g.tZ)("link",{as:"font",crossOrigin:"anonymous",href:"/fonts/inter/Inter-roman.var.woff2",rel:"preload",type:"font/woff2"},"font"),d?(0,g.tZ)("link",{href:d,rel:"icon",sizes:"any"}):(0,g.BX)(g.HY,{children:[(0,g.tZ)("link",{href:"/favicon.ico",rel:"icon",sizes:"any"}),(0,g.tZ)("link",{href:"/icon/favicon.svg",rel:"icon",type:"image/svg+xml"}),(0,g.tZ)("link",{href:"/icon/favicon-32x32.png",rel:"icon",sizes:"32x32",type:"image/png"}),(0,g.tZ)("link",{href:"/icon/favicon-16x16.png",rel:"icon",sizes:"16x16",type:"image/png"})]})]})},[c,b,m,u,d]);return(0,g.tZ)(P,{authRequiredIfWalletConnected:t,children:(0,g.tZ)(w,{children:(0,g.tZ)(N,{children:(0,g.BX)(T,{children:[h,n]})})})})}},99153:function(e,t,n){"use strict";n.d(t,{lj:function(){return X},w8:function(){return q},xs:function(){return N},xW:function(){return D},ye:function(){return H},a7:function(){return Y},fs:function(){return U},c0:function(){return M},if:function(){return K},Iv:function(){return V},Po:function(){return F},rT:function(){return G}});var r=n(50029),i=n(59499),a=n(16835),o=n(4730),s=n(87794),c=n.n(s),l=n(28332),u=n(819),d=n(71641),p=n(73359),f=n(50319),m=n(97467),b=n(69686),h=n(93205),v=n(67294),g=n(87536),x=n(66010),k=n(69077),w=n(17360),Z=n(94371),y=n(8243),_=n(35266),S=n(13723),C=n(99816),j=n(48254),E=n(76028),A=n(89485),O=n(92366);function P(e){var t=e.split(" "),n=t.length;return 1===n?e:"".concat(t.slice(0,n-1).join(" "),"\xa0").concat(t[n-1])}var z=n(62201),W=n(15277),L=["logOut"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e){var t=e.source,n=e.onSubscribeSuccessContinue,r=e.onUnsubscribeSuccessContinue,i=e.projectAddress,a=(0,k.mA)().address;return(0,W.tZ)(T,{projectAddress:i,source:t,onSubscribeSuccessContinue:n,onUnsubscribeSuccessContinue:r},a)}function T(e){var t,n,i,s,p,f,m,b,g,x,Z=e.source,y=e.onSubscribeSuccessContinue,j=e.onUnsubscribeSuccessContinue,A=e.projectAddress,O=(0,u.J)({fragment:_.y9Z,from:(0,C.ch)(A)}).data,P=(0,k.mA)(),B=(0,k.qL)().disconnect,D=(0,E.a)(),T=D.logOut,R=(0,o.Z)(D,L),Q=(0,S.e)(),J=Q.data,$=Q.loading,ee=null==J?void 0:null===(t=J.subscriptionEmail)||void 0===t?void 0:t.verificationStatus,et=(0,d.a)(_.HDN,R.userAddress?{variables:{projectAddress:A,walletAddress:R.userAddress},notifyOnNetworkStatusChange:!0}:{skip:!0}),en=!!(null!==(n=et.data)&&void 0!==n&&n.isSubscribed),er=v.useState({relinkEmail:!1,unverifiedEmail:void 0,subscribeFlowGoal:en?"unsubscribe":"subscribe"}),ei=(0,a.Z)(er,2),ea=ei[0],eo=ei[1],es=(0,z.Ij)(A),ec=es.walletlessSubscriptionId,el=es.setWalletlessSubscriptionId,eu=null===(i=(0,d.a)(_.ohr,{variables:{id:ec},skip:!ec,fetchPolicy:"cache-first",onCompleted:function(e){var t,n;null!==(t=e.walletlessSubscription)&&void 0!==t&&t.token&&(0,z.yP)(null===(n=e.walletlessSubscription)||void 0===n?void 0:n.token)}}).data)||void 0===i?void 0:i.walletlessSubscription,ed=v.useCallback(function(){B(),T(),eo(function(e){return I(I({},e),{},{relinkEmail:!1,unverifiedEmail:void 0})})},[B,T]),ep="".concat(null===(s=(0,C.pY)(O))||void 0===s?void 0:s.value),ef=(0,z.fc)({goal:ea.subscribeFlowGoal,isWalletSubscribed:et.loading?null:null!==(p=null===(f=et.data)||void 0===f?void 0:f.isSubscribed)&&void 0!==p?p:null,hasWalletlessSubscriptionAttempt:!!ec,hasUnlinkEmailRequest:ea.relinkEmail,isConnectedToWallet:!!P.address,subscriptionEmailVerificationStatus:null!=ee?ee:null,walletlessSubscriptionStatus:null!==(m=null==eu?void 0:eu.subscriptionStatus)&&void 0!==m?m:null,bypassWalletless:"SubscriberEdition"===Z,isLoggedIn:R.isLoggedIn}),em=ef===z.TL.walletlessConfirmEmail||ef===z.TL.walletlessEnterEmail||ef===z.TL.walletlessSubscribed;switch(v.useEffect(function(){em&&l.track("subscribe__walletless_email_entered",{address__subscriber:R.userAddress,source__:"modal",state__email_link:ee})},[em]),v.useEffect(function(){ef===z.TL.walletlessSubscribed&&l.track("subscribe__walletless_email_subscribed",{address__subscriber:R.userAddress,source__:"modal",state__email_link:ee})},[ef]),ef){case z.TL.connectWallet:return(0,W.tZ)(X,{});case z.TL.linkEmail:return(0,W.tZ)(q,{account:R.userAddress,initialEmail:null==eu?void 0:eu.email,onDisconnect:ed,onError:function(){l.track("subscribe__email_link_failure",{address__subscriber:R.userAddress,source__:"modal",state__email_link:ee})},onSuccess:function(e){l.track("subscribe__email_link_confirmed",{address__subscriber:R.userAddress,source__:"modal",state__email_link:ee}),eo(function(t){return I(I({},t),{},{unverifiedEmail:e.email})})}});case z.TL.loading:return(0,W.tZ)(h.xu,{display:"flex",justifyContent:"center",paddingY:"32px",children:(0,W.tZ)(h.$j,{})});case z.TL.subscribe:return(0,W.tZ)(N,{account:R.userAddress,loading:$,projectAddress:A,projectName:ep,source:Z,onDisconnect:ed,onSuccess:function(){l.track("subscribe__sub_confirmed",{address__subscriber:R.userAddress,source__:Z})}});case z.TL.subscribed:return(0,W.tZ)(H,{onContinue:(0,r.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y(),setTimeout(function(){eo(function(e){return I(I({},e),{},{relinkEmail:!1})})},500);case 2:case"end":return e.stop()}},e)}))});case z.TL.unlinkEmail:return(0,W.tZ)(Y,{account:R.userAddress,onCancel:function(){return eo(function(e){return I(I({},e),{},{relinkEmail:!1})})},onSuccess:function(){l.track("subscribe__email_unlink_confirmed",{address__subscriber:R.userAddress,source__:"modal",state__email_link:ee}),eo(function(e){return I(I({},e),{},{relinkEmail:!1})})}});case z.TL.verifyEmail:return(0,W.tZ)(K,{account:R.userAddress,email:null!==(b=ea.unverifiedEmail)&&void 0!==b?b:null==J?void 0:null===(g=J.subscriptionEmail)||void 0===g?void 0:null===(x=g.maskedEmail)||void 0===x?void 0:x.replace(/\*/g,"•"),onClickRelink:function(){return eo(function(e){return I(I({},e),{},{relinkEmail:!0})})},onResendEmail:function(){l.track("subscribe__email_verif_resent",{address__subscriber:R.userAddress,source__:Z,state__email_link:ee})}});case z.TL.walletlessConfirmEmail:return(0,W.tZ)(V,{projectAddress:A,source:Z,walletlessSubscriptionEmail:null==eu?void 0:eu.email,onChangeEmail:function(){el(void 0)},onResendEmail:function(e){el(e)}},ec);case z.TL.walletlessEnterEmail:return(0,W.tZ)(F,{projectAddress:A,projectName:ep,source:Z,onSuccess:function(e){el(e)}});case z.TL.walletlessSubscribed:return(0,W.tZ)(G,{email:null==eu?void 0:eu.email,projectAddress:A});case z.TL.unsubscribe:return(0,W.tZ)(U,{account:R.userAddress,projectAddress:A,projectName:ep,onDisconnect:ed,onSuccess:function(){l.track("subscribe__unsub_confirmed",{address__project:A,address__subscriber:R.userAddress,source__:Z}),eo(function(e){return I(I({},e),{},{relinkEmail:!1})})}});case z.TL.unsubscribed:return(0,W.tZ)(M,{onContinue:(0,r.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j(),setTimeout(function(){eo(function(e){return I(I({},e),{},{relinkEmail:!1})})},500);case 2:case"end":return e.stop()}},e)}))});case z.TL.login:return(0,W.tZ)(w.Z,{});default:return null}}function X(){var e=(0,b.dd)(),t=v.useState(!1),n=(0,a.Z)(t,2),r=n[0],i=n[1];return r||(i(!0),e.open||e.setOpen(!0)),(0,W.tZ)(h.xu,{width:"full",children:(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:"Connect your wallet to subscribe.",title:"Connect Wallet"}),(0,W.tZ)(y.p,{center:!0,size:"medium",width:"full"})]})})}function R(e){var t=e.description,n=e.title;return(0,W.tZ)(h.xu,{padding:"8px",children:(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(h.xv,{align:"center",color:"foreground",size:"extraLarge",weight:"semiBold",children:n}),(0,W.tZ)(h.xv,{align:"center",color:"textSecondary",size:"small",children:t})]})})}function q(e){var t,n=e.account,i=e.onDisconnect,o=e.onSuccess,s=e.initialEmail,u=(0,k.QW)().signMessageAsync,d=(0,g.cI)({defaultValues:{email:null!=s?s:""},shouldUseNativeValidation:!0}),m=d.formState,b=d.register,w=d.handleSubmit,Z=m.isSubmitting,y=(0,p.t)(_.DWF),S=(0,a.Z)(y,1)[0],C=(0,f.D)(_.DYK),j=(0,a.Z)(C,1)[0],E=v.useState({checkWallet:!1}),A=(0,a.Z)(E,2),P=A[0],L=A[1],B=v.useCallback((t=(0,r.Z)(c().mark(function e(t){var r,i,a,s,d;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l.track("subscribe_email_input_continue"),L(function(e){return I(I({},e),{},{checkWallet:!0})}),a=t.email,e.next=6,S({variables:{email:a,projectAddress:n,walletAddress:n,type:"LINK_EMAIL"}});case 6:return s=null===(r=e.sent.data)||void 0===r?void 0:r.subscriptionSigningMessage,e.next=10,u({message:s});case 10:return d=e.sent,L(function(e){return I(I({},e),{},{checkWallet:!1})}),e.next=14,j({variables:{email:a,signature:d,signedMessage:s,walletAddress:n,walletlessSubscriptionToken:(0,z.kl)()},refetchQueries:[_.HDN]});case 14:if(!(null!==(i=e.sent.errors)&&void 0!==i&&i.length)){e.next=17;break}throw Error();case 17:l.track("subscribe_email_sign_message_success"),o({email:a}),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(0),l.track("subscribe_email_sign_message_failure"),L(function(e){return I(I({},e),{},{checkWallet:!1})}),x.Am.error(e.t0.message.includes("user rejected signing")?"User rejected signing":"Something went wrong");case 26:case"end":return e.stop()}},e,null,[[0,21]])})),function(e){return t.apply(this,arguments)}),[n,j,S,u,o]);return(0,W.BX)(h.Kq,{space:{xs:"16px",md:"24px"},children:[(0,W.tZ)(R,{description:"Email updates will be sent to this address when new entries are posted.",title:"Connect your email address"}),(0,W.tZ)(h.Kq,{space:"16px",children:(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(Q,{label:"Switch Wallet",value:(0,O.kS)(n),onClick:i}),(0,W.tZ)(h.xu,{as:"form",onSubmit:w(B),children:(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(h.TX,{children:(0,W.tZ)(h.xu,{as:"label",htmlFor:"email",children:"Email address"})}),(0,W.tZ)(h.xu,I({as:"input",autoComplete:"off",backgroundColor:"transparent",borderColor:{base:"foregroundSecondary",focus:"accent"},borderRadius:"large",borderWidth:"1px",color:"text",flex:1,fontSize:"small",minHeight:"48px",paddingX:"16px",placeholder:"Enter email address",transitionDuration:"150",transitionProperty:"colors",transitionTimingFunction:"inOut",type:"email",width:{xs:"full",md:void 0}},b("email",{required:!0}))),(0,W.tZ)(h.zx,{center:!0,disabled:Z,loading:Z,size:"medium",variant:"primary",width:{xs:"full",md:"auto"},children:P.checkWallet?"Check Wallet App":"Continue"})]})})]})})]})}function N(e){var t=e.account,n=e.loading,i=e.projectName,o=e.projectAddress,s=e.onDisconnect,u=e.onSuccess,d=e.source,p=(0,g.cI)(),m=(0,f.D)(_.ngk),b=(0,a.Z)(m,1)[0];v.useEffect(function(){l.track("subscribe_post_verification_prompt_reached")},[]);var k=v.useCallback((0,r.Z)(c().mark(function e(){var t,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({variables:{projectAddress:o,source:d},update:j.T});case 3:if(null==(t=e.sent.data)?void 0:t.subscribe){e.next=8;break}throw Error("Failed to subscribe");case 8:u(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),null!==(n=e.t0.message)&&void 0!==n&&n.includes("already subscribed")?u():x.Am.error("Something went wrong");case 14:case"end":return e.stop()}},e,null,[[0,11]])})),[b,o,d,u]);return(0,W.tZ)(h.xu,{width:"full",children:(0,W.tZ)(h.sI,{children:(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:(0,W.BX)(W.HY,{children:["Confirm your subscription to"," ",(0,W.tZ)(h.xv,{as:"span",weight:"semiBold",children:P(i)}),"."]}),title:"Subscribe for updates"}),(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(Q,{label:"Switch Wallet",value:(0,O.kS)(t),onClick:s}),(0,W.tZ)(h.xu,{as:"form",onSubmit:p.handleSubmit(k),children:(0,W.tZ)(h.Od,{loading:n,width:"full",children:(0,W.tZ)(h.zx,{center:!0,disabled:p.formState.isSubmitting,loading:p.formState.isSubmitting,size:"medium",variant:"primary",width:"full",children:"Subscribe"})})})]})]})})})}function K(e){var t=e.account,n=e.email,i=e.onClickRelink,o=e.onResendEmail,s=(0,g.cI)(),l=s.formState,u=s.handleSubmit,d=l.isSubmitting,b=(0,p.t)(_.nBd,{variables:{walletAddress:t}}),k=(0,a.Z)(b,2),w=k[0],Z=k[1].loading,y=(0,f.D)(_.eRu,{variables:{walletAddress:t}}),S=(0,a.Z)(y,1)[0],C=v.useCallback((0,r.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:null==o||o(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x.Am.error(e.t0.message.includes("user rejected signing")?"User rejected signing":"Something went wrong");case 9:case"end":return e.stop()}},e,null,[[0,6]])})),[S,o]);return(0,A.s)("focus",function(e){Z||w({fetchPolicy:"network-only"})}),(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:"We’ve sent a verification email. Please click the link within it to begin receiving updates.",title:"Verify your email address"}),(0,W.BX)(h.Kq,{space:"8px",children:[!!n&&(0,W.BX)(h.xu,{alignItems:"center",backgroundColor:"foregroundTertiary",borderRadius:"large",color:"text",display:"flex",gap:"8px",height:"48px",paddingX:"16px",paddingY:"8px",children:[(0,W.tZ)(m.bV6,{height:"20px",width:"20px"}),(0,W.tZ)(h.xv,{color:"text",size:"small",children:n})]}),(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(h.xu,{as:"form",onSubmit:u(C),children:(0,W.tZ)(h.zx,{center:!0,disabled:d,loading:d,size:"medium",variant:"primary",width:"full",children:"Resend Verification Email"})}),(0,W.tZ)(h.zx,{size:"medium",variant:"secondary",width:"full",onClick:i,children:"Change Email Address"})]})]})]})}function H(e){var t=e.onContinue;return(0,W.tZ)(h.xu,{width:"full",children:(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:"You’ll now receive email updates.",title:"You’re subscribed!"}),(0,W.tZ)(h.zx,{center:!0,size:"medium",variant:"primary",width:"full",onClick:t,children:"Continue"})]})})}function M(e){var t=e.onContinue;return(0,W.tZ)(h.xu,{width:"full",children:(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:"You’ll no longer receive email updates.",title:"You’ve unsubscribed"}),(0,W.tZ)(h.zx,{center:!0,size:"medium",variant:"primary",width:"full",onClick:t,children:"Continue"})]})})}function U(e){var t=e.account,n=e.loading,i=e.projectAddress,o=e.projectName,s=e.onSuccess,l=e.onDisconnect,u=(0,g.cI)(),d=(0,f.D)(_.Yio),p=(0,a.Z)(d,1)[0],m=v.useCallback((0,r.Z)(c().mark(function e(){var t,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({variables:{projectAddress:i},update:j.T});case 3:if(n=null==(t=e.sent.data)?void 0:t.unsubscribe){e.next=8;break}throw Error("Failed to unsubscribe");case 8:s(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x.Am.error("Something went wrong");case 14:case"end":return e.stop()}},e,null,[[0,11]])})),[p,i,s]);return(0,W.tZ)(h.sI,{children:(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(R,{description:(0,W.BX)(W.HY,{children:["You’re currently receiving email updates from"," ",(0,W.tZ)(h.xv,{as:"span",weight:"semiBold",children:P(o)}),"."]}),title:"You’re subscribed!"}),(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(Q,{label:"Switch Wallet",value:(0,O.kS)(t),onClick:l}),(0,W.tZ)(h.xu,{as:"form",onSubmit:u.handleSubmit(m),children:(0,W.tZ)(h.Od,{loading:n,width:"full",children:(0,W.tZ)(h.zx,{center:!0,disabled:u.formState.isSubmitting,loading:u.formState.isSubmitting,size:"medium",variant:"secondary",width:"full",children:"Unsubscribe"})})})]})]})})}function Y(e){var t=e.account,n=e.onCancel,i=e.onSuccess,o=(0,k.QW)().signMessageAsync,s=(0,g.cI)(),l=s.formState,u=s.handleSubmit,d=l.isSubmitting,m=(0,p.t)(_.DWF),b=(0,a.Z)(m,1)[0],w=(0,f.D)(_.mfS),Z=(0,a.Z)(w,1)[0],y=v.useState({checkWallet:!1}),S=(0,a.Z)(y,2),C=S[0],j=S[1],E=v.useCallback((0,r.Z)(c().mark(function e(){var n,r,a,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(function(e){return I(I({},e),{},{checkWallet:!0})}),e.next=4,b({variables:{projectAddress:t,walletAddress:t,type:"UNLINK_EMAIL"}});case 4:return r=null===(n=e.sent.data)||void 0===n?void 0:n.subscriptionSigningMessage,e.next=8,o({message:r});case 8:return a=e.sent,j(function(e){return I(I({},e),{},{checkWallet:!1})}),e.next=12,Z({variables:{signature:a,signedMessage:r,walletAddress:t}});case 12:if(null!=(s=e.sent.data)&&s.unlinkEmail){e.next=16;break}throw Error("Failed to unlink email");case 16:i(),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),j(function(e){return I(I({},e),{},{checkWallet:!1})}),x.Am.error(e.t0.message.includes("user rejected signing")?"User rejected signing":"Something went wrong");case 23:case"end":return e.stop()}},e,null,[[0,19]])})),[t,Z,b,o,i]);return(0,W.BX)(h.Kq,{space:"24px",children:[(0,W.tZ)(h.xu,{paddingX:"32px",children:(0,W.tZ)(R,{description:"Connect a new email address with your wallet address.",title:"Change your email address"})}),(0,W.BX)(h.Kq,{space:"8px",children:[(0,W.tZ)(h.xu,{as:"form",onSubmit:u(E),children:(0,W.tZ)(h.zx,{center:!0,disabled:d,loading:d,size:"medium",variant:"primary",width:"full",children:C.checkWallet?"Check Wallet App":"Confirm"})}),(0,W.tZ)(h.zx,{center:!0,disabled:d,size:"medium",variant:"tertiary",width:"full",onClick:n,children:"Cancel"})]})]})}function F(e){var t,n=(0,g.cI)({shouldUseNativeValidation:!0}),i=(0,z.KK)().walletlessSubscribe;return(0,W.BX)(h.xu,{as:"form",display:"flex",flexDirection:"column",onSubmit:n.handleSubmit((t=(0,r.Z)(c().mark(function t(n){var r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.projectAddress){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i({email:n.email,projectAddress:e.projectAddress,source:e.source});case 4:(r=t.sent)&&e.onSuccess(r);case 6:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})),children:[(0,W.tZ)(R,{description:"Receive new entries from ".concat(e.projectName,", directly to your inbox"),title:"Subscribe for updates"}),(0,W.tZ)(Z.L,{size:"16px"}),(0,W.tZ)(h.xu,I({as:"input",autoComplete:"email",backgroundColor:"transparent",borderColor:{base:"foregroundSecondary",focus:"accent"},borderRadius:"large",borderWidth:"1px",color:"text",flex:1,fontSize:"small",minHeight:"48px",paddingX:"16px",placeholder:"Enter email address",transitionDuration:"150",transitionProperty:"colors",transitionTimingFunction:"inOut",type:"email",width:{xs:"full",md:void 0}},n.register("email",{required:!0}))),(0,W.tZ)(Z.L,{size:"8px"}),(0,W.tZ)(h.zx,{center:!0,disabled:n.formState.isSubmitting,loading:n.formState.isSubmitting,size:"medium",type:"submit",width:"full",children:"Subscribe"})]})}function V(e){var t=(0,z.Ij)(e.projectAddress).walletlessSubscriptionId,n=(0,z.KK)(),i=n.walletlessSubscribe,o=n.walletlessSubscribeLoading,s=v.useState(!1),l=(0,a.Z)(s,2),u=l[0],p=l[1],f=(0,d.a)(_.ohr,{variables:{id:t},skip:!t,fetchPolicy:"network-only"}),m=!!t,b=f.startPolling,g=f.stopPolling;return v.useEffect(function(){if(m){b(1e3);var e=window.setTimeout(function(){g(),p(!0)},12e4);return function(){g(),window.clearTimeout(e)}}},[m,b,g]),(0,W.BX)(h.xu,{display:"flex",flexDirection:"column",children:[(0,W.tZ)(R,{description:"We’ve sent a confirmation email. Please click the link within it to begin receiving updates.",title:"Confirm your email address"}),(0,W.tZ)(Z.L,{size:"16px"}),(0,W.tZ)(h.xu,{alignItems:"center",backgroundColor:"foregroundSecondary",borderRadius:"large",display:"flex",height:"48px",justifyContent:"center",paddingX:"16px",children:(0,W.tZ)(h.xv,{color:"textTertiary",size:"small",weight:"semiBold",children:e.walletlessSubscriptionEmail})}),(0,W.tZ)(Z.L,{size:"8px"}),(0,W.tZ)(h.zx,{center:!0,disabled:o,loading:o,size:"medium",type:"submit",width:"full",onClick:(0,r.Z)(c().mark(function t(){var n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.projectAddress&&e.walletlessSubscriptionEmail)){t.next=5;break}return t.next=3,i({email:e.walletlessSubscriptionEmail,projectAddress:e.projectAddress,source:e.source});case 3:(n=t.sent)&&e.onResendEmail(n);case 5:case"end":return t.stop()}},t)})),children:"Resend Confirmation Email"}),(0,W.tZ)(Z.L,{size:"8px"}),(0,W.tZ)(h.zx,{center:!0,disabled:o,size:"medium",type:"submit",variant:"secondary",width:"full",onClick:function(){e.onChangeEmail()},children:"Change Email Address"}),u&&(0,W.BX)(W.HY,{children:[(0,W.tZ)(Z.L,{size:"16px"}),(0,W.tZ)(h.xu,{as:"button",color:{base:"textTertiary",hover:"text"},cursor:"pointer",disabled:f.loading,display:"flex",fontSize:"small",fontWeight:"medium",justifyContent:"center",textAlign:"center",transitionDuration:"150",transitionProperty:"colors",width:"full",onClick:function(){f.refetch()},children:"Refresh"})]})]})}function G(e){var t=(0,z.Ij)(e.projectAddress).setWalletlessSubscriptionId,n=(0,f.D)(_.tZA),i=(0,a.Z)(n,2),o=i[0],s=i[1];return(0,W.BX)(h.xu,{display:"flex",flexDirection:"column",children:[(0,W.tZ)(R,{description:"You’ll receive updates straight to your email. Connect your wallet to subscribe to projects faster and finish setting up your Mirror account.",title:"You’re subscribed!"}),(0,W.tZ)(Z.L,{size:"16px"}),(0,W.tZ)(y.p,{size:"medium",width:"full"}),(0,W.tZ)(Z.L,{size:"8px"}),(0,W.tZ)(h.zx,{as:"a",href:"https://support.mirror.xyz/hc/en-us/articles/11619751479956-How-do-I-get-started-with-a-wallet-",size:"medium",target:"_blank",variant:"tertiary",width:"full",children:"I don’t have a wallet"}),(0,W.tZ)(Z.L,{size:"16px"}),(0,W.tZ)(h.xu,{as:"button",color:{base:"textTertiary",hover:"text"},cursor:"pointer",disabled:s.loading,display:"flex",fontSize:"small",fontWeight:"medium",justifyContent:"center",textAlign:"center",transitionDuration:"150",transitionProperty:"colors",width:"full",onClick:(0,r.Z)(c().mark(function n(){var r,i,a;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.projectAddress){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,o({variables:{projectAddress:e.projectAddress,email:e.email,walletlessSubscriptionToken:(0,z.kl)()}});case 5:t(null!==(r=null===(i=n.sent.data)||void 0===i?void 0:null===(a=i.walletlessUnsubscribe)||void 0===a?void 0:a._id)&&void 0!==r?r:void 0),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:case"end":return n.stop()}},n,null,[[2,9]])})),children:"Unsubscribe"})]})}function Q(e){var t=e.label,n=e.value,r=e.onClick;return(0,W.tZ)(h.xu,{children:(0,W.BX)(h.xu,{display:"flex",gap:"0px",height:"48px",children:[(0,W.BX)(h.xu,{alignItems:"center",backgroundColor:"foregroundTertiary",borderBottomLeftRadius:"large",borderTopLeftRadius:"large",display:"flex",flexGrow:1,gap:"8px",paddingX:"16px",children:[(0,W.tZ)(h.nr,{size:"20px"}),(0,W.tZ)(h.xv,{size:"small",children:n})]}),(0,W.tZ)(h.xu,{as:"button",backgroundColor:{hover:"foregroundSecondaryHover",base:"foregroundSecondary"},borderBottomRightRadius:"large",borderTopRightRadius:"large",color:"text",cursor:"pointer",fontSize:"small",fontWeight:"semiBold",paddingX:"16px",transitionDuration:"150",transitionProperty:"colors",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r()}),children:t})]})})}},99833:function(){}}]);